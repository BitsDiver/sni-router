# ============================================================
# SNI Router — environment variables template
# Copy to .env and adjust values before starting the container
# ============================================================

# Port HAProxy listens on for TLS/SNI-based routing (default: 443)
SNI_LISTEN_PORT=443

# TLS SNI routing rules — format: hostname:backend_ip:backend_port
# N must be consecutive integers starting at 1 (1, 2, 3, …)
# Wildcards: use *.example.com to match any subdomain of example.com
SNI_ROUTE_1=app1.example.com:192.168.1.10:443
SNI_ROUTE_2=app2.example.com:192.168.1.20:443
SNI_ROUTE_3=*.staging.example.com:192.168.1.30:443

# Default backend when no SNI rule matches — format: ip:port (REQUIRED)
SNI_DEFAULT=192.168.1.10:443

# Plain TCP routing rules (no TLS inspection) — format: listen_port:ip:dest_port
# Each rule adds a dedicated HAProxy frontend on the specified listen port.
# Remember to expose that port in docker-compose.yml ports: section.
# TCP_ROUTE_1=5432:192.168.1.40:5432
# TCP_ROUTE_2=1883:192.168.1.50:1883

# Forward PROXY protocol v2 header to backends so they see the real client IP
# instead of the sni-router address. Upstream services must be configured to
# accept PROXY protocol on their listen port.
# Accepted values: true | false  (default: false)
PROXY_PROTOCOL=false

# HAProxy built-in stats web UI
# Bind ONLY to a local network interface in your ports: mapping (never to 0.0.0.0)
# Access at http://<local-ip>:STATS_PORT/stats
STATS_ENABLED=false
STATS_PORT=8404
# STATS_PASSWORD=changeme   # user is always "admin" — leave empty to disable auth
